<section>
  <h2>Top Repeated By Severity Level</h2>
  <table>
    <tr><th>Level</th><th>Messgge</th><th>Count</th></tr>

    <!-- ERROR -->
    {% set top_err = metrics.top.ERROR %}
    {% if top_err %}
      {% for item in top_err %}
        <tr>
          <td>ERROR</td>
          <td>{{ item.message }}</td>
          <td>{{ item.count }}</td>
        </tr>
      {% endfor %}
    {% else %}
      <tr><td>ERROR</td><td class="muted" colspan="2">N/A</td></tr>
    {% endif %}

    <!-- WARNING -->
    {% set top_warn = metrics.top.WARNING %}
    {% if top_warn %}
      {% for item in top_warn %}
        <tr>
          <td>WARNING</td>
          <td>{{ item.message }}</td>
          <td>{{ item.count }}</td>
        </tr>
      {% endfor %}
    {% else %}
      <tr><td>WARNING</td><td class="muted" colspan="2">N/A</td></tr>
    {% endif %}
  </table>
</section>

<section>
  <h2>Samples by Severity</h2>

  {% for level in ["ERROR", "WARNING", "INFO"] %}
  <h3>{{ level }}</h3>
  <div class="grid">
    <section>
      <h4>First {{ samples[level]["first"] | length }}</h4>
      <table>
        <tr><th>#</th><th>Line</th></tr>
        {% for i, line in enumerate(samples[level]["first"]) %}
        <tr><td>{{ i+1 }}</td><td><code>{{ line }}</code></td></tr>
        {% endfor %}
      </table>
    </section>
    <section>
      <h4>Last {{ samples[level]["last"] | length }}</h4>
      <table>
        <tr><th>#</th><th>Line</th></tr>
        {% for i, line in enumerate(samples[level]["last"]) %}
        <tr><td>{{ i+1 }}</td><td><code>{{ line }}</code></td></tr>
        {% endfor %}
      </table>
    </section>
  </div>
  {% endfor %}
</section>

